(()=>{"use strict";function e(e,t){let o=document.createElement("div");o.className="productCard",o.dataset.productId=e.id,o.innerHTML=`<div class="productCard__imgContainer">\n      <img class="productCard__img" src="${e.image}" alt="image">\n    </div>\n    <div class="productCard__info">\n      <h3 class="productCard__title">${e.title}</h3>\n      <p class="productCard__category">${e.category}</p>\n      <p class="productCard__price">${e.price}</p>\n    </div>`,t.appendChild(o)}const t=document.getElementById("product-list");let o=[];const r=document.getElementById("loadMoreProducts"),n=document.getElementById("deleteProduct"),c=document.getElementById("addProduct"),l={title:"test product",price:13.5,description:"lorem ipsum set",image:"https://i.pravatar.cc",category:"electronic"};!async function(){try{let r=await async function(){let e="https://fakestoreapi.com/products";isNaN(6)||(e+="?limit=6");try{console.log("Sending fetch request");let t=await fetch(e);if(!t.ok)throw new Error("Network error");console.log("loading data");let o=await t.json();return console.log(o),o}catch(e){console.log("Error loading products",e)}}();console.log(r),r.forEach((r=>{e(r,t),o.push(r),async function(){let r=document.createElement("div");r.className="productList__categories",r.setAttribute("id","productList__categories"),async function(){try{console.log("Sending fetch request for load categories");let e=await fetch("https://fakestoreapi.com/products/categories");if(!e.ok)throw new Error("Network error");console.log("Loading categories names");let t=await e.json();return console.log(t),t}catch(e){console.log("Error loading categories ",e)}}().then((n=>function(r,n){let c='<option value="">--Show all products--</option>';r.forEach((e=>{c+=`<option value="${e}">\n        ${e}\n      </option>`}));let l=`<label for="productList__select">\n      Show products filtered by category:\n    </label>\n    <select name="productList__select" id="productList__select">\n      ${c};\n    </select>`;n.innerHTML=l,productList.parentNode.prepend(n),n.addEventListener("change",(r=>function(r,n){let c;t.innerHTML="",c=""!==n?o.filter((e=>e.category===n)):o,c.forEach((o=>e(o,t)))}(0,r.target.value)))}(n,r)))}()}))}catch(e){console.log("error loading data from API",e)}}(),console.log("loaded from index.js"),console.log("index.js code runs. Dev server and auto reload works"),r.addEventListener("click",(e=>{(function(e){if(console.log("load more products called"),o.length>=20)return;const t=Math.min(6,20-o.length);let r=new Array(t).fill().map(((e,t)=>o.length+t+1));Promise.allSettled(r.map((e=>async function(e){let t=`https://fakestoreapi.com/products/${e}`;try{console.log("Sending fetch request");let e=await fetch(t);if(!e.ok)throw new Error("Network problem. ");console.log("loading data");let o=await e.json();return console.log(o),o}catch(e){console.log("Error loading products",e)}}(e)))).then((t=>{t.forEach((e=>{(!e??"fulfilled"!==e.status)||o.push(e.value)})),o.length<20?(e.removeAttribute("disabled"),e.innerHTML="Загрузить еще"):e.innerHTML="Нет данных для загрузки"})).catch((e=>console.log(e)))})(e.target),e.target.setAttribute("disabled",""),e.target.innerHTML="Загрузка..."})),n.addEventListener("click",(()=>async function(){try{console.log("Sending fetch request for deleting product10");let e=await fetch("https://fakestoreapi.com/products/10",{method:"DELETE"});if(!e.ok)throw new Error("Network problem");let t=await e.json();if(null===t)throw console.dir(t),new Error("Удаляемый продкут в базе данных отсутствует");return 10===t.id&&alert(`Продукт: /n ${t.title} /n /n Успешно удален`),console.log("Результат удаления объекта:"),console.dir(t),t}catch(e){alert("Error deleting product "+e)}}())),c.addEventListener("click",(()=>async function(e){const t={method:"POST",body:JSON.stringify(e)};try{console.log("Sending fetch request for adding new product");let e=await fetch("https://fakestoreapi.com/products",t);if(!e.ok)throw new Error("Network error");console.log("Loading server response of adding new product");let o=await e.json();return console.log("Result of adding new product"),console.dir(o),alert(`New product added. Assigned id - ${o.id}`),o}catch(e){console.log("Результат добавления нового объекта"),console.log("Ошибка добавления нового товара ",e)}}(l)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFvRCxJQUFJL0MsR0FDTixJQUFJRCxNQUFNLCtDQVNsQixPRDNCMkQsS0NxQnZEQyxFQUFNdkIsSUFDUnVFLE1BQU0sZUFBZWhELEVBQU1wQiw4QkFHN0JlLFFBQVFDLElBQUksK0JBQ1pELFFBQVFvRCxJQUFJL0MsR0FDTEEsQ0FFVCxDQUFFLE1BQU9FLEdBQ1A4QyxNQUFNLDBCQUE0QjlDLEVBQ3BDLENBQ0YsQ0RoQ2lEK0MsS0FDakQ3RCxFQUFjNkIsaUJBQWlCLFNBQVMsSUNpQ2pDMUIsZUFBMEJ0QixHQUMvQixNQUNNaUYsRUFBVSxDQUNkSixPQUFRLE9BQ1JLLEtBQU1DLEtBQUtDLFVBQVVwRixJQUd2QixJQUNFMEIsUUFBUUMsSUFBSSxnREFDWixJQUFJSixRQUFlSyxNQVJULG9DQVFvQnFELEdBQzlCLElBQUsxRCxFQUFPTSxHQUFJLE1BQU0sSUFBSUMsTUFBTSxpQkFDaENKLFFBQVFDLElBQUksaURBRVosSUFBSUksUUFBY1IsRUFBT1MsT0FNekIsT0FKQU4sUUFBUUMsSUFBSSxnQ0FDWkQsUUFBUW9ELElBQUkvQyxHQUNaZ0QsTUFBTSxvQ0FBb0NoRCxFQUFNdkIsTUFFekN1QixDQUVULENBQUUsTUFBT0UsR0FDUFAsUUFBUUMsSUFBSSx1Q0FDWkQsUUFBUUMsSUFBSSxtQ0FBb0NNLEVBQ2xELENBQ0YsQ0QxRDhDb0QsQ0FBV2pFLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91cmJhbl9leDEwLy4vc3JjL21vZHVsZXMvcHJvZHVjdExpc3QvcHJvZHVjdENhcmQvcHJvZHVjdENhcmQuanMiLCJ3ZWJwYWNrOi8vdXJiYW5fZXgxMC8uL3NyYy9tb2R1bGVzL3Byb2R1Y3RMaXN0L3Byb2R1Y3RMaXN0LmpzIiwid2VicGFjazovL3VyYmFuX2V4MTAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdXJiYW5fZXgxMC8uL3NyYy9zY3JpcHRzL2RhdGFMb2FkaW5nLmpzIiwid2VicGFjazovL3VyYmFuX2V4MTAvLi9zcmMvbW9kdWxlcy9wcm9kdWN0TGlzdC9jYXRlZ29yeUZpbHRlci9jYXRlZ29yeUZpbHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJy4vcHJvZHVjdENhcmQuc2NzcydcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dQcm9kdWN0Q2FyZChwcm9kdWN0RGF0YSwgcGFyZW50KSB7XG5cbiAgbGV0IHByb2R1Y3RDYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcHJvZHVjdENhcmQuY2xhc3NOYW1lID0gJ3Byb2R1Y3RDYXJkJztcbiAgcHJvZHVjdENhcmQuZGF0YXNldC5wcm9kdWN0SWQgPSBwcm9kdWN0RGF0YS5pZDtcblxuICBwcm9kdWN0Q2FyZC5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInByb2R1Y3RDYXJkX19pbWdDb250YWluZXJcIj5cbiAgICAgIDxpbWcgY2xhc3M9XCJwcm9kdWN0Q2FyZF9faW1nXCIgc3JjPVwiJHtwcm9kdWN0RGF0YS5pbWFnZX1cIiBhbHQ9XCJpbWFnZVwiPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0Q2FyZF9faW5mb1wiPlxuICAgICAgPGgzIGNsYXNzPVwicHJvZHVjdENhcmRfX3RpdGxlXCI+JHtwcm9kdWN0RGF0YS50aXRsZX08L2gzPlxuICAgICAgPHAgY2xhc3M9XCJwcm9kdWN0Q2FyZF9fY2F0ZWdvcnlcIj4ke3Byb2R1Y3REYXRhLmNhdGVnb3J5fTwvcD5cbiAgICAgIDxwIGNsYXNzPVwicHJvZHVjdENhcmRfX3ByaWNlXCI+JHtwcm9kdWN0RGF0YS5wcmljZX08L3A+XG4gICAgPC9kaXY+YDtcblxuICBwYXJlbnQuYXBwZW5kQ2hpbGQocHJvZHVjdENhcmQpO1xuXG59XG5cbiIsImltcG9ydCB7IGdldENhdGVnb3JpZXMsIGxvYWRQcm9kdWN0cywgbG9hZFNpbmdsZVByb2R1Y3QgfSBmcm9tIFwiLi4vLi4vc2NyaXB0cy9kYXRhTG9hZGluZy5qc1wiO1xuaW1wb3J0IHsgc2V0Q2F0ZWdvcnlTZWxlY3QgfSBmcm9tIFwiLi9jYXRlZ29yeUZpbHRlci9jYXRlZ29yeUZpbHRlci5qc1wiO1xuaW1wb3J0IHsgc2hvd1Byb2R1Y3RDYXJkIH0gZnJvbSBcIi4vcHJvZHVjdENhcmQvcHJvZHVjdENhcmQuanNcIjtcbmltcG9ydCAnLi9wcm9kdWN0TGlzdC5zY3NzJztcblxuY29uc3QgcHJvZHVjdExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2R1Y3QtbGlzdFwiKTtcblxubGV0IHByb2R1Y3RzRGF0YSA9IFtdO1xuXG5cbi8qbGV0IGNhdGVnb3JpZXMgPSBnZXRDYXRlZ29yaWVzKCkudGhlbih2YWx1ZSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiQ2F0ZWdvcmllcyBsb2FkZWQgaW4gUHJvZHVjdCBsaXN0IG1vZHVsZVwiLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcblxufSk7Ki9cblxuLy9sZXQgY2F0ZWdvcnlGaWx0ZXIgPSAnJztcblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdFByb2R1Y3RMaXN0KCkge1xuICB0cnkge1xuICAgIGxldCByZXN1bHQgPSBhd2FpdCBsb2FkUHJvZHVjdHMoNik7XG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgIHJlc3VsdC5mb3JFYWNoKHByb2QgPT4ge1xuICAgICAgc2hvd1Byb2R1Y3RDYXJkKHByb2QsIHByb2R1Y3RMaXN0KTtcbiAgICAgIHByb2R1Y3RzRGF0YS5wdXNoKHByb2QpO1xuICAgICAgc2V0Q2F0ZWdvcnlTZWxlY3QoKTtcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCdlcnJvciBsb2FkaW5nIGRhdGEgZnJvbSBBUEknLCBlcnJvcik7XG4gIH1cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZE1vcmVQcm9kdWN0cyhidG4pIHtcblxuICBjb25zb2xlLmxvZyhcImxvYWQgbW9yZSBwcm9kdWN0cyBjYWxsZWRcIik7XG5cbiAgaWYgKHByb2R1Y3RzRGF0YS5sZW5ndGggPj0gMjApIHJldHVybjtcblxuICBjb25zdCBsb2FkQ291bnQgPSBNYXRoLm1pbig2LCAyMCAtIHByb2R1Y3RzRGF0YS5sZW5ndGgpO1xuICBsZXQgcHJvZHVjdElkQXJyID0gbmV3IEFycmF5KGxvYWRDb3VudCkuZmlsbCgpXG4gICAgLm1hcCgoXywgaSkgPT4gcHJvZHVjdHNEYXRhLmxlbmd0aCArIGkgKyAxKTtcblxuICBQcm9taXNlLmFsbFNldHRsZWQocHJvZHVjdElkQXJyLm1hcChpZCA9PiBsb2FkU2luZ2xlUHJvZHVjdChpZCkpKVxuICAgIC50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgcmVzdWx0cy5mb3JFYWNoKChwcm9kdWN0RGF0YSkgPT4ge1xuICAgICAgICBpZiAoIXByb2R1Y3REYXRhID8/IHByb2R1Y3REYXRhLnN0YXR1cyAhPT0gJ2Z1bGZpbGxlZCcpIHJldHVybjtcblxuICAgICAgICBwcm9kdWN0c0RhdGEucHVzaChwcm9kdWN0RGF0YS52YWx1ZSk7XG5cbiAgICAgIH0pO1xuXG5cbiAgICAgIGlmIChwcm9kdWN0c0RhdGEubGVuZ3RoIDwgMjApIHtcbiAgICAgICAgYnRuLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgYnRuLmlubmVySFRNTCA9IFwi0JfQsNCz0YDRg9C30LjRgtGMINC10YnQtVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnRuLmlubmVySFRNTCA9IFwi0J3QtdGCINC00LDQvdC90YvRhSDQtNC70Y8g0LfQsNCz0YDRg9C30LrQuFwiO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJQcm9kdWN0TGlzdChmaWx0ZXJCeSwgdmFsdWUpIHtcbiAgbGV0IGZpbHRlcmVkUHJvZHVjdHM7XG4gIHByb2R1Y3RMaXN0LmlubmVySFRNTCA9ICcnO1xuXG4gIGlmICh2YWx1ZSAhPT0gJycpIHtcbiAgICBmaWx0ZXJlZFByb2R1Y3RzID0gcHJvZHVjdHNEYXRhLmZpbHRlcihwcm9kID0+IHByb2RbZmlsdGVyQnldID09PSB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgZmlsdGVyZWRQcm9kdWN0cyA9IHByb2R1Y3RzRGF0YTtcbiAgfVxuXG4gIGZpbHRlcmVkUHJvZHVjdHMuZm9yRWFjaChwcm9kID0+IHNob3dQcm9kdWN0Q2FyZChwcm9kLCBwcm9kdWN0TGlzdCkpO1xufVxuXG5cbiIsIi8vaW1wb3J0IHsgc2hvd1Byb2R1Y3RDYXJkIH0gZnJvbSBcIi4vbW9kdWxlcy9wcm9kdWN0Q2FyZC9wcm9kdWN0Q2FyZC5qc1wiO1xuaW1wb3J0IHsgaW5pdFByb2R1Y3RMaXN0LCBsb2FkTW9yZVByb2R1Y3RzLCBzZXRDYXRlZ29yeVNlbGVjdCB9IGZyb20gXCIuL21vZHVsZXMvcHJvZHVjdExpc3QvcHJvZHVjdExpc3QuanNcIjtcbmltcG9ydCB7IGFkZFByb2R1Y3QsIGRlbGV0ZVByb2R1Y3QsIGdldENhdGVnb3JpZXMgfSBmcm9tIFwiLi9zY3JpcHRzL2RhdGFMb2FkaW5nLmpzXCI7XG4vL2ltcG9ydCB7IGxvYWRQcm9kdWN0cyB9IGZyb20gXCIuL3NjcmlwdHMvZGF0YUxvYWRpbmcuanNcIjtcbmltcG9ydCBcIi4vc3R5bGVzL21haW4uc2Nzc1wiO1xuXG5jb25zdCBidG5Mb2FkTW9yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkTW9yZVByb2R1Y3RzJyk7XG5jb25zdCBidG5EZWxldGVQcm9kdWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZVByb2R1Y3QnKTtcbmNvbnN0IGJ0bkFkZFByb2R1Y3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkUHJvZHVjdCcpO1xuXG5jb25zdCBzYW1wbGVQcm9kdWN0RGF0YSA9IHtcbiAgdGl0bGU6ICd0ZXN0IHByb2R1Y3QnLFxuICBwcmljZTogMTMuNSxcbiAgZGVzY3JpcHRpb246ICdsb3JlbSBpcHN1bSBzZXQnLFxuICBpbWFnZTogJ2h0dHBzOi8vaS5wcmF2YXRhci5jYycsXG4gIGNhdGVnb3J5OiAnZWxlY3Ryb25pYydcbn1cblxuaW5pdFByb2R1Y3RMaXN0KCk7XG4vL2dldENhdGVnb3JpZXMoKTtcblxuY29uc29sZS5sb2coXCJsb2FkZWQgZnJvbSBpbmRleC5qc1wiKTtcblxuY29uc29sZS5sb2coXCJpbmRleC5qcyBjb2RlIHJ1bnMuIERldiBzZXJ2ZXIgYW5kIGF1dG8gcmVsb2FkIHdvcmtzXCIpO1xuXG5idG5Mb2FkTW9yZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gIGxvYWRNb3JlUHJvZHVjdHMoZXZlbnQudGFyZ2V0KTtcbiAgZXZlbnQudGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSAn0JfQsNCz0YDRg9C30LrQsC4uLidcbn0pO1xuXG5cbi8vYnRuTG9hZE1vcmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxvYWRNb3JlUHJvZHVjdHMpXG5cbmJ0bkRlbGV0ZVByb2R1Y3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGRlbGV0ZVByb2R1Y3QoMTApKTtcbmJ0bkFkZFByb2R1Y3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFkZFByb2R1Y3Qoc2FtcGxlUHJvZHVjdERhdGEpKTtcblxuXG5cblxuXG5cblxuXG5cbiIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkUHJvZHVjdHMobGltaXQpIHtcbiAgbGV0IHVybCA9ICdodHRwczovL2Zha2VzdG9yZWFwaS5jb20vcHJvZHVjdHMnO1xuXG4gIGlmICghaXNOYU4oK2xpbWl0KSkge1xuICAgIHVybCA9IHVybCArIGA/bGltaXQ9JHtsaW1pdH1gO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlbmRpbmcgZmV0Y2ggcmVxdWVzdFwiKTtcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoIXJlc3VsdC5vaykgdGhyb3cgbmV3IEVycm9yKFwiTmV0d29yayBlcnJvclwiKTtcbiAgICBjb25zb2xlLmxvZyhcImxvYWRpbmcgZGF0YVwiKTtcbiAgICBsZXQgdmFsdWUgPSBhd2FpdCByZXN1bHQuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhcIkVycm9yIGxvYWRpbmcgcHJvZHVjdHNcIiwgZXJyb3IpO1xuICB9XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRTaW5nbGVQcm9kdWN0KHByb2R1Y3RJZCkge1xuICBsZXQgdXJsID0gYGh0dHBzOi8vZmFrZXN0b3JlYXBpLmNvbS9wcm9kdWN0cy8ke3Byb2R1Y3RJZH1gO1xuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJTZW5kaW5nIGZldGNoIHJlcXVlc3RcIik7XG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgaWYgKCFyZXN1bHQub2spIHRocm93IG5ldyBFcnJvcignTmV0d29yayBwcm9ibGVtLiAnKTtcblxuICAgIGNvbnNvbGUubG9nKFwibG9hZGluZyBkYXRhXCIpO1xuICAgIGxldCB2YWx1ZSA9IGF3YWl0IHJlc3VsdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyBwcm9kdWN0c1wiLCBlcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVByb2R1Y3QocHJvZHVjdElkKSB7XG4gIGxldCB1cmwgPSBgaHR0cHM6Ly9mYWtlc3RvcmVhcGkuY29tL3Byb2R1Y3RzLyR7cHJvZHVjdElkfWA7XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgU2VuZGluZyBmZXRjaCByZXF1ZXN0IGZvciBkZWxldGluZyBwcm9kdWN0JHtwcm9kdWN0SWR9YCk7XG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IGZldGNoKHVybCwgeyBtZXRob2Q6ICdERUxFVEUnIH0pO1xuICAgIGlmICghcmVzdWx0Lm9rKSB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgcHJvYmxlbScpO1xuXG4gICAgbGV0IHZhbHVlID0gYXdhaXQgcmVzdWx0Lmpzb24oKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS5kaXIodmFsdWUpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwi0KPQtNCw0LvRj9C10LzRi9C5INC/0YDQvtC00LrRg9GCINCyINCx0LDQt9C1INC00LDQvdC90YvRhSDQvtGC0YHRg9GC0YHRgtCy0YPQtdGCXCIpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZS5pZCA9PT0gcHJvZHVjdElkKSB7XG4gICAgICBhbGVydChg0J/RgNC+0LTRg9C60YI6IC9uICR7dmFsdWUudGl0bGV9IC9uIC9uINCj0YHQv9C10YjQvdC+INGD0LTQsNC70LXQvWApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfQoNC10LfRg9C70YzRgtCw0YIg0YPQtNCw0LvQtdC90LjRjyDQvtCx0YrQtdC60YLQsDonKTtcbiAgICBjb25zb2xlLmRpcih2YWx1ZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgYWxlcnQoXCJFcnJvciBkZWxldGluZyBwcm9kdWN0IFwiICsgZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQcm9kdWN0KHByb2R1Y3REYXRhKSB7XG4gIGNvbnN0IHVybCA9ICdodHRwczovL2Zha2VzdG9yZWFwaS5jb20vcHJvZHVjdHMnO1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkocHJvZHVjdERhdGEpXG4gIH07XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlbmRpbmcgZmV0Y2ggcmVxdWVzdCBmb3IgYWRkaW5nIG5ldyBwcm9kdWN0XCIpO1xuICAgIGxldCByZXN1bHQgPSBhd2FpdCBmZXRjaCh1cmwsIG9wdGlvbnMpO1xuICAgIGlmICghcmVzdWx0Lm9rKSB0aHJvdyBuZXcgRXJyb3IoXCJOZXR3b3JrIGVycm9yXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiTG9hZGluZyBzZXJ2ZXIgcmVzcG9uc2Ugb2YgYWRkaW5nIG5ldyBwcm9kdWN0XCIpO1xuXG4gICAgbGV0IHZhbHVlID0gYXdhaXQgcmVzdWx0Lmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKFwiUmVzdWx0IG9mIGFkZGluZyBuZXcgcHJvZHVjdFwiKTtcbiAgICBjb25zb2xlLmRpcih2YWx1ZSk7XG4gICAgYWxlcnQoYE5ldyBwcm9kdWN0IGFkZGVkLiBBc3NpZ25lZCBpZCAtICR7dmFsdWUuaWR9YCk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygn0KDQtdC30YPQu9GM0YLQsNGCINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0LPQviDQvtCx0YrQtdC60YLQsCcpO1xuICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7Qs9C+INGC0L7QstCw0YDQsCAnLCBlcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSB7XG4gIGNvbnN0IHVybCA9ICdodHRwczovL2Zha2VzdG9yZWFwaS5jb20vcHJvZHVjdHMvY2F0ZWdvcmllcyc7XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlbmRpbmcgZmV0Y2ggcmVxdWVzdCBmb3IgbG9hZCBjYXRlZ29yaWVzXCIpO1xuICAgIGxldCByZXN1bHQgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGlmICghcmVzdWx0Lm9rKSB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcblxuICAgIGNvbnNvbGUubG9nKFwiTG9hZGluZyBjYXRlZ29yaWVzIG5hbWVzXCIpO1xuICAgIGxldCB2YWx1ZSA9IGF3YWl0IHJlc3VsdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyBjYXRlZ29yaWVzIFwiLCBlcnJvcik7XG4gIH1cbn1cbiIsImltcG9ydCB7IGdldENhdGVnb3JpZXMgfSBmcm9tIFwiLi4vLi4vLi4vc2NyaXB0cy9kYXRhTG9hZGluZ1wiO1xuaW1wb3J0IHsgZmlsdGVyUHJvZHVjdExpc3QgfSBmcm9tIFwiLi4vcHJvZHVjdExpc3RcIjtcblxuXG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldENhdGVnb3J5U2VsZWN0KCkge1xuICBsZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2F0ZWdvcnlTZWxlY3QuY2xhc3NOYW1lID0gJ3Byb2R1Y3RMaXN0X19jYXRlZ29yaWVzJztcbiAgY2F0ZWdvcnlTZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdwcm9kdWN0TGlzdF9fY2F0ZWdvcmllcycpO1xuXG4gIGdldENhdGVnb3JpZXMoKS50aGVuKHZhbHVlID0+IHNob3dDYXRlZ29yeVNlbGVjdCh2YWx1ZSwgY2F0ZWdvcnlTZWxlY3QpKTtcblxufVxuXG5mdW5jdGlvbiBzaG93Q2F0ZWdvcnlTZWxlY3Qoc2VsZWN0RGF0YSwgZWxlbSkge1xuICBsZXQgY2F0ZWdvcmllcyA9ICc8b3B0aW9uIHZhbHVlPVwiXCI+LS1TaG93IGFsbCBwcm9kdWN0cy0tPC9vcHRpb24+JztcblxuICBzZWxlY3REYXRhLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgIGNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzICsgYDxvcHRpb24gdmFsdWU9XCIke2NhdGVnb3J5fVwiPlxuICAgICAgICAke2NhdGVnb3J5fVxuICAgICAgPC9vcHRpb24+YDtcbiAgfSk7XG5cbiAgbGV0IGNhdGVnb3J5U2VsZWN0ID0gYDxsYWJlbCBmb3I9XCJwcm9kdWN0TGlzdF9fc2VsZWN0XCI+XG4gICAgICBTaG93IHByb2R1Y3RzIGZpbHRlcmVkIGJ5IGNhdGVnb3J5OlxuICAgIDwvbGFiZWw+XG4gICAgPHNlbGVjdCBuYW1lPVwicHJvZHVjdExpc3RfX3NlbGVjdFwiIGlkPVwicHJvZHVjdExpc3RfX3NlbGVjdFwiPlxuICAgICAgJHtjYXRlZ29yaWVzfTtcbiAgICA8L3NlbGVjdD5gO1xuXG4gIGVsZW0uaW5uZXJIVE1MID0gY2F0ZWdvcnlTZWxlY3Q7XG5cbiAgLy9jb25zb2xlLmxvZyhjYXRlZ29yeVNlbGVjdCk7XG4gIHByb2R1Y3RMaXN0LnBhcmVudE5vZGUucHJlcGVuZChlbGVtKTtcbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLFxuICAgIChldmVudCkgPT4gZmlsdGVyUHJvZHVjdExpc3QoJ2NhdGVnb3J5JywgZXZlbnQudGFyZ2V0LnZhbHVlKSk7XG59XG4iXSwibmFtZXMiOlsic2hvd1Byb2R1Y3RDYXJkIiwicHJvZHVjdERhdGEiLCJwYXJlbnQiLCJwcm9kdWN0Q2FyZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImRhdGFzZXQiLCJwcm9kdWN0SWQiLCJpZCIsImlubmVySFRNTCIsImltYWdlIiwidGl0bGUiLCJjYXRlZ29yeSIsInByaWNlIiwiYXBwZW5kQ2hpbGQiLCJnZXRFbGVtZW50QnlJZCIsInByb2R1Y3RzRGF0YSIsImJ0bkxvYWRNb3JlIiwiYnRuRGVsZXRlUHJvZHVjdCIsImJ0bkFkZFByb2R1Y3QiLCJzYW1wbGVQcm9kdWN0RGF0YSIsImRlc2NyaXB0aW9uIiwiYXN5bmMiLCJyZXN1bHQiLCJ1cmwiLCJpc05hTiIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJ2YWx1ZSIsImpzb24iLCJlcnJvciIsImxvYWRQcm9kdWN0cyIsImZvckVhY2giLCJwcm9kIiwicHVzaCIsImNhdGVnb3J5U2VsZWN0Iiwic2V0QXR0cmlidXRlIiwiZ2V0Q2F0ZWdvcmllcyIsInRoZW4iLCJzZWxlY3REYXRhIiwiZWxlbSIsImNhdGVnb3JpZXMiLCJwcm9kdWN0TGlzdCIsInBhcmVudE5vZGUiLCJwcmVwZW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZmlsdGVyQnkiLCJmaWx0ZXJlZFByb2R1Y3RzIiwiZmlsdGVyIiwiZmlsdGVyUHJvZHVjdExpc3QiLCJ0YXJnZXQiLCJzaG93Q2F0ZWdvcnlTZWxlY3QiLCJzZXRDYXRlZ29yeVNlbGVjdCIsImluaXRQcm9kdWN0TGlzdCIsImJ0biIsImxlbmd0aCIsImxvYWRDb3VudCIsIk1hdGgiLCJtaW4iLCJwcm9kdWN0SWRBcnIiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfIiwiaSIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwibG9hZFNpbmdsZVByb2R1Y3QiLCJyZXN1bHRzIiwic3RhdHVzIiwicmVtb3ZlQXR0cmlidXRlIiwiY2F0Y2giLCJsb2FkTW9yZVByb2R1Y3RzIiwibWV0aG9kIiwiZGlyIiwiYWxlcnQiLCJkZWxldGVQcm9kdWN0Iiwib3B0aW9ucyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkUHJvZHVjdCJdLCJzb3VyY2VSb290IjoiIn0=