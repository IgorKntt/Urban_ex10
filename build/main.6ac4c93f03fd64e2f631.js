(()=>{"use strict";function e(e,t){let o=document.createElement("div");o.className="productCard",o.dataset.productId=e.id,o.innerHTML=`<div class="productCard__imgContainer">\n      <img class="productCard__img" src="${e.image}" alt="image">\n    </div>\n    <div class="productCard__info">\n      <h3 class="productCard__title">${e.title}</h3>\n      <p class="productCard__category">${e.category}</p>\n      <p class="productCard__price">${e.price}</p>\n    </div>`,t.appendChild(o)}const t=document.getElementById("product-list");let o=[],r="";const n=document.getElementById("loadMoreProducts"),c=document.getElementById("deleteProduct"),l=document.getElementById("addProduct"),a={title:"test product",price:13.5,description:"lorem ipsum set",image:"https://i.pravatar.cc",category:"electronic"};(async function(){let e="https://fakestoreapi.com/products";isNaN(6)||(e+="?limit=6");try{console.log("Sending fetch request");let t=await fetch(e);console.log("loading data");let o=await t.json();return console.log(o),o}catch(e){console.log("Error loading products",e)}})().then((r=>{r.forEach((r=>{e(r,t),o.push(r)})),console.log("productsData:",o)})).catch((e=>{console.log("error loading data from API",e)})),console.log("loaded from index.js"),console.log("index.js code runs. Dev server and auto reload works"),n.addEventListener("click",(n=>{(function(){if(o.length>=20)return;const n=Math.min(6,20-o.length);let c=new Array(n).fill().map(((e,t)=>o.length+t+1));Promise.allSettled(c.map((e=>async function(e){let t=`https://fakestoreapi.com/products/${e}`;try{console.log("Sending fetch request");let e=await fetch(t);if(!e.ok)throw new Error("Network problem. ");console.log("loading data");let o=await e.json();return console.log(o),o}catch(e){console.log("Error loading products",e)}}(e)))).then((n=>{n.forEach((n=>{(!n??"fulfilled"!==n.status)||(o.push(n.value),""!==r&&n.value.category===r&&e(n.value,t))}))})).catch((e=>console.log(e)))})(n.target),n.target.setAttribute("disabled","")})),c.addEventListener("click",(()=>async function(){try{console.log("Sending fetch request for deleting product10");let e=await fetch("https://fakestoreapi.com/products/10",{method:"DELETE"});if(!e.ok)throw new Error("Network problem");let t=await e.json();if(null===t)throw console.dir(t),new Error("Удаляемый продкут в базе данных отсутствует");return 10===t.id&&alert(`Продукт: /n ${t.title} /n /n Успешно удален`),console.log("Результат удаления объекта:"),console.dir(t),t}catch(e){alert("Error deleting product "+e)}}())),l.addEventListener("click",(()=>async function(e){const t={method:"POST",body:JSON.stringify(e)};try{console.log("Sending fetch request for adding new product");let e=await fetch("https://fakestoreapi.com/products",t);if(!e.ok)throw new Error("Network error");console.log("Loading server response of adding new product");let o=await e.json();return console.log("Result of adding new product"),console.dir(o),o}catch(e){console.log("Результат добавления нового объекта"),console.log("Ошибка добавления нового товара ",e)}}(a))),async function(){let n=document.createElement("div");n.className="productList__categories",n.setAttribute("id","productList__categories"),async function(){try{console.log("Sending fetch request for load categories");let e=await fetch("https://fakestoreapi.com/products/categories");if(!e.ok)throw new Error("Network error");console.log("Loading categories names");let t=await e.json();return console.log(t),t}catch(e){console.log("Error loading categories ",e)}}().then((c=>function(n,c){let l='<option value="">--Show all products--</option>';n.forEach((e=>{l+=`<option value="${e}">\n        ${e}\n      </option>`}));let a=`<label for="productList__select">\n      Show products filtered by category:\n    </label>\n    <select name="productList__select" id="productList__select">\n      ${l};\n    </select>`;c.innerHTML=a,t.parentNode.prepend(c),c.addEventListener("change",(n=>function(n,c){let l;t.innerHTML="",r=c,l=""!==c?o.filter((e=>e.category===c)):o,l.forEach((o=>e(o,t)))}(0,n.target.value)))}(c,n)))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSw0QkFBNkJLLEVBQzNDLENBQ0YsQ0Z0RkV1QyxHQUFnQnJDLE1BQUtKLEdBSXZCLFNBQTRCMEMsRUFBWUMsR0FDdEMsSUFBSUMsRUFBYSxrREFFakJGLEVBQVdwQyxTQUFRekIsSUFDakIrRCxHQUEwQixrQkFBa0IvRCxnQkFDdENBLG9CQUNNLElBR2QsSUFBSTJELEVBQWlCLHVLQUlmSSxvQkFHTkQsRUFBS2pFLFVBQVk4RCxFQUdqQnhELEVBQVk2RCxXQUFXQyxRQUFRSCxHQUMvQkEsRUFBS2xDLGlCQUFpQixVQUNuQkMsR0EyQ0UsU0FBMkJxQyxFQUFVL0MsR0FDMUMsSUFBSWdELEVBQ0poRSxFQUFZTixVQUFZLEdBQ3hCUyxFQUFpQmEsRUFHZmdELEVBRFksS0FBVmhELEVBQ2lCZCxFQUFhK0QsUUFBT0MsR0FBUUEsRUFBYSxXQUFNbEQsSUFFL0NkLEVBR3JCOEQsRUFBaUIxQyxTQUFRNEMsR0FBUWxGLEVBQWdCa0YsRUFBTWxFLElBQ3pELENBdkRlbUUsQ0FBa0IsRUFBWXpDLEVBQU1tQixPQUFPN0IsUUFDMUQsQ0ExQmdDb0QsQ0FBbUJwRCxFQUFPd0MsSUFFMUQsQ0NTQWEsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3VyYmFuX2V4MTAvLi9zcmMvbW9kdWxlcy9wcm9kdWN0Q2FyZC9wcm9kdWN0Q2FyZC5qcyIsIndlYnBhY2s6Ly91cmJhbl9leDEwLy4vc3JjL21vZHVsZXMvcHJvZHVjdExpc3QvcHJvZHVjdExpc3QuanMiLCJ3ZWJwYWNrOi8vdXJiYW5fZXgxMC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly91cmJhbl9leDEwLy4vc3JjL3NjcmlwdHMvZGF0YUxvYWRpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuL3Byb2R1Y3RDYXJkLnNjc3MnXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93UHJvZHVjdENhcmQocHJvZHVjdERhdGEsIHBhcmVudCkge1xuXG4gIGxldCBwcm9kdWN0Q2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHByb2R1Y3RDYXJkLmNsYXNzTmFtZSA9ICdwcm9kdWN0Q2FyZCc7XG4gIHByb2R1Y3RDYXJkLmRhdGFzZXQucHJvZHVjdElkID0gcHJvZHVjdERhdGEuaWQ7XG5cbiAgcHJvZHVjdENhcmQuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJwcm9kdWN0Q2FyZF9faW1nQ29udGFpbmVyXCI+XG4gICAgICA8aW1nIGNsYXNzPVwicHJvZHVjdENhcmRfX2ltZ1wiIHNyYz1cIiR7cHJvZHVjdERhdGEuaW1hZ2V9XCIgYWx0PVwiaW1hZ2VcIj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdENhcmRfX2luZm9cIj5cbiAgICAgIDxoMyBjbGFzcz1cInByb2R1Y3RDYXJkX190aXRsZVwiPiR7cHJvZHVjdERhdGEudGl0bGV9PC9oMz5cbiAgICAgIDxwIGNsYXNzPVwicHJvZHVjdENhcmRfX2NhdGVnb3J5XCI+JHtwcm9kdWN0RGF0YS5jYXRlZ29yeX08L3A+XG4gICAgICA8cCBjbGFzcz1cInByb2R1Y3RDYXJkX19wcmljZVwiPiR7cHJvZHVjdERhdGEucHJpY2V9PC9wPlxuICAgIDwvZGl2PmA7XG5cbiAgcGFyZW50LmFwcGVuZENoaWxkKHByb2R1Y3RDYXJkKTtcblxufVxuXG4iLCJpbXBvcnQgeyBnZXRDYXRlZ29yaWVzLCBsb2FkUHJvZHVjdHMsIGxvYWRTaW5nbGVQcm9kdWN0IH0gZnJvbSBcIi4uLy4uL3NjcmlwdHMvZGF0YUxvYWRpbmcuanNcIjtcbmltcG9ydCB7IHNob3dQcm9kdWN0Q2FyZCB9IGZyb20gXCIuLi9wcm9kdWN0Q2FyZC9wcm9kdWN0Q2FyZC5qc1wiO1xuaW1wb3J0ICcuL3Byb2R1Y3RMaXN0LnNjc3MnO1xuXG5jb25zdCBwcm9kdWN0TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZHVjdC1saXN0XCIpO1xuXG5sZXQgcHJvZHVjdHNEYXRhID0gW107XG5cbmxldCBjYXRlZ29yeUZpbHRlciA9ICcnO1xuXG4vKmxldCBjYXRlZ29yaWVzID0gZ2V0Q2F0ZWdvcmllcygpLnRoZW4odmFsdWUgPT4ge1xuICBjb25zb2xlLmxvZyhcIkNhdGVnb3JpZXMgbG9hZGVkIGluIFByb2R1Y3QgbGlzdCBtb2R1bGVcIiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG5cbn0pOyovXG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldENhdGVnb3J5U2VsZWN0KCkge1xuICBsZXQgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2F0ZWdvcnlTZWxlY3QuY2xhc3NOYW1lID0gJ3Byb2R1Y3RMaXN0X19jYXRlZ29yaWVzJztcbiAgY2F0ZWdvcnlTZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdwcm9kdWN0TGlzdF9fY2F0ZWdvcmllcycpO1xuXG4gIGdldENhdGVnb3JpZXMoKS50aGVuKHZhbHVlID0+IHNob3dDYXRlZ29yeVNlbGVjdCh2YWx1ZSwgY2F0ZWdvcnlTZWxlY3QpKTtcblxufVxuXG5mdW5jdGlvbiBzaG93Q2F0ZWdvcnlTZWxlY3Qoc2VsZWN0RGF0YSwgZWxlbSkge1xuICBsZXQgY2F0ZWdvcmllcyA9ICc8b3B0aW9uIHZhbHVlPVwiXCI+LS1TaG93IGFsbCBwcm9kdWN0cy0tPC9vcHRpb24+JztcblxuICBzZWxlY3REYXRhLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgIGNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzICsgYDxvcHRpb24gdmFsdWU9XCIke2NhdGVnb3J5fVwiPlxuICAgICAgICAke2NhdGVnb3J5fVxuICAgICAgPC9vcHRpb24+YDtcbiAgfSk7XG5cbiAgbGV0IGNhdGVnb3J5U2VsZWN0ID0gYDxsYWJlbCBmb3I9XCJwcm9kdWN0TGlzdF9fc2VsZWN0XCI+XG4gICAgICBTaG93IHByb2R1Y3RzIGZpbHRlcmVkIGJ5IGNhdGVnb3J5OlxuICAgIDwvbGFiZWw+XG4gICAgPHNlbGVjdCBuYW1lPVwicHJvZHVjdExpc3RfX3NlbGVjdFwiIGlkPVwicHJvZHVjdExpc3RfX3NlbGVjdFwiPlxuICAgICAgJHtjYXRlZ29yaWVzfTtcbiAgICA8L3NlbGVjdD5gO1xuXG4gIGVsZW0uaW5uZXJIVE1MID0gY2F0ZWdvcnlTZWxlY3Q7XG5cbiAgLy9jb25zb2xlLmxvZyhjYXRlZ29yeVNlbGVjdCk7XG4gIHByb2R1Y3RMaXN0LnBhcmVudE5vZGUucHJlcGVuZChlbGVtKTtcbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLFxuICAgIChldmVudCkgPT4gZmlsdGVyUHJvZHVjdExpc3QoJ2NhdGVnb3J5JywgZXZlbnQudGFyZ2V0LnZhbHVlKSk7XG59XG5cbi8vbGV0IHJlc3VsdCA9IGxvYWRQcm9kdWN0cyg2KTtcbmV4cG9ydCBmdW5jdGlvbiBpbml0UHJvZHVjdExpc3QoKSB7XG5cbiAgbGV0IHJlc3VsdCA9IGxvYWRQcm9kdWN0cyg2KTtcblxuICByZXN1bHQudGhlbigocmVzKSA9PiB7XG4gICAgcmVzLmZvckVhY2goKHByb2R1Y3REYXRhKSA9PiB7XG4gICAgICBzaG93UHJvZHVjdENhcmQocHJvZHVjdERhdGEsIHByb2R1Y3RMaXN0KTtcbiAgICAgIHByb2R1Y3RzRGF0YS5wdXNoKHByb2R1Y3REYXRhKTtcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygncHJvZHVjdHNEYXRhOicsIHByb2R1Y3RzRGF0YSk7XG4gIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICBjb25zb2xlLmxvZygnZXJyb3IgbG9hZGluZyBkYXRhIGZyb20gQVBJJywgZXJyb3IpO1xuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZE1vcmVQcm9kdWN0cygpIHtcblxuICBpZiAocHJvZHVjdHNEYXRhLmxlbmd0aCA+PSAyMCkgcmV0dXJuO1xuXG4gIGNvbnN0IGxvYWRDb3VudCA9IE1hdGgubWluKDYsIDIwIC0gcHJvZHVjdHNEYXRhLmxlbmd0aCk7XG4gIGxldCBwcm9kdWN0SWRBcnIgPSBuZXcgQXJyYXkobG9hZENvdW50KS5maWxsKClcbiAgICAubWFwKChfLCBpKSA9PiBwcm9kdWN0c0RhdGEubGVuZ3RoICsgaSArIDEpO1xuXG4gIFByb21pc2UuYWxsU2V0dGxlZChwcm9kdWN0SWRBcnIubWFwKGlkID0+IGxvYWRTaW5nbGVQcm9kdWN0KGlkKSkpXG4gICAgLnRoZW4ocmVzdWx0cyA9PiB7XG4gICAgICByZXN1bHRzLmZvckVhY2goKHByb2R1Y3REYXRhKSA9PiB7XG4gICAgICAgIGlmICghcHJvZHVjdERhdGEgPz8gcHJvZHVjdERhdGEuc3RhdHVzICE9PSAnZnVsZmlsbGVkJykgcmV0dXJuO1xuXG4gICAgICAgIHByb2R1Y3RzRGF0YS5wdXNoKHByb2R1Y3REYXRhLnZhbHVlKTtcblxuICAgICAgICBpZiAoY2F0ZWdvcnlGaWx0ZXIgIT09ICcnICYmXG4gICAgICAgICAgcHJvZHVjdERhdGEudmFsdWUuY2F0ZWdvcnkgPT09IGNhdGVnb3J5RmlsdGVyKSB7XG5cbiAgICAgICAgICBzaG93UHJvZHVjdENhcmQocHJvZHVjdERhdGEudmFsdWUsIHByb2R1Y3RMaXN0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclByb2R1Y3RMaXN0KGZpbHRlckJ5LCB2YWx1ZSkge1xuICBsZXQgZmlsdGVyZWRQcm9kdWN0cztcbiAgcHJvZHVjdExpc3QuaW5uZXJIVE1MID0gJyc7XG4gIGNhdGVnb3J5RmlsdGVyID0gdmFsdWU7XG5cbiAgaWYgKHZhbHVlICE9PSAnJykge1xuICAgIGZpbHRlcmVkUHJvZHVjdHMgPSBwcm9kdWN0c0RhdGEuZmlsdGVyKHByb2QgPT4gcHJvZFtmaWx0ZXJCeV0gPT09IHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBmaWx0ZXJlZFByb2R1Y3RzID0gcHJvZHVjdHNEYXRhO1xuICB9XG5cbiAgZmlsdGVyZWRQcm9kdWN0cy5mb3JFYWNoKHByb2QgPT4gc2hvd1Byb2R1Y3RDYXJkKHByb2QsIHByb2R1Y3RMaXN0KSk7XG59XG5cblxuIiwiLy9pbXBvcnQgeyBzaG93UHJvZHVjdENhcmQgfSBmcm9tIFwiLi9tb2R1bGVzL3Byb2R1Y3RDYXJkL3Byb2R1Y3RDYXJkLmpzXCI7XG5pbXBvcnQgeyBpbml0UHJvZHVjdExpc3QsIGxvYWRNb3JlUHJvZHVjdHMsIHNldENhdGVnb3J5U2VsZWN0IH0gZnJvbSBcIi4vbW9kdWxlcy9wcm9kdWN0TGlzdC9wcm9kdWN0TGlzdC5qc1wiO1xuaW1wb3J0IHsgYWRkUHJvZHVjdCwgZGVsZXRlUHJvZHVjdCwgZ2V0Q2F0ZWdvcmllcyB9IGZyb20gXCIuL3NjcmlwdHMvZGF0YUxvYWRpbmcuanNcIjtcbi8vaW1wb3J0IHsgbG9hZFByb2R1Y3RzIH0gZnJvbSBcIi4vc2NyaXB0cy9kYXRhTG9hZGluZy5qc1wiO1xuaW1wb3J0IFwiLi9zdHlsZXMvbWFpbi5zY3NzXCI7XG5cbmNvbnN0IGJ0bkxvYWRNb3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRNb3JlUHJvZHVjdHMnKTtcbmNvbnN0IGJ0bkRlbGV0ZVByb2R1Y3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlUHJvZHVjdCcpO1xuY29uc3QgYnRuQWRkUHJvZHVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRQcm9kdWN0Jyk7XG5cbmNvbnN0IHNhbXBsZVByb2R1Y3REYXRhID0ge1xuICB0aXRsZTogJ3Rlc3QgcHJvZHVjdCcsXG4gIHByaWNlOiAxMy41LFxuICBkZXNjcmlwdGlvbjogJ2xvcmVtIGlwc3VtIHNldCcsXG4gIGltYWdlOiAnaHR0cHM6Ly9pLnByYXZhdGFyLmNjJyxcbiAgY2F0ZWdvcnk6ICdlbGVjdHJvbmljJ1xufVxuXG5pbml0UHJvZHVjdExpc3QoKTtcbi8vZ2V0Q2F0ZWdvcmllcygpO1xuXG5jb25zb2xlLmxvZyhcImxvYWRlZCBmcm9tIGluZGV4LmpzXCIpO1xuXG5jb25zb2xlLmxvZyhcImluZGV4LmpzIGNvZGUgcnVucy4gRGV2IHNlcnZlciBhbmQgYXV0byByZWxvYWQgd29ya3NcIik7XG5cbmJ0bkxvYWRNb3JlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgbG9hZE1vcmVQcm9kdWN0cyhldmVudC50YXJnZXQpO1xuICBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbn0pO1xuXG5idG5EZWxldGVQcm9kdWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBkZWxldGVQcm9kdWN0KDEwKSk7XG5idG5BZGRQcm9kdWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRQcm9kdWN0KHNhbXBsZVByb2R1Y3REYXRhKSk7XG5cbnNldENhdGVnb3J5U2VsZWN0KGJ0bkxvYWRNb3JlKTtcblxuXG5cblxuXG5cblxuIiwiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRQcm9kdWN0cyhsaW1pdCkge1xuICBsZXQgdXJsID0gJ2h0dHBzOi8vZmFrZXN0b3JlYXBpLmNvbS9wcm9kdWN0cyc7XG5cbiAgaWYgKCFpc05hTigrbGltaXQpKSB7XG4gICAgdXJsID0gdXJsICsgYD9saW1pdD0ke2xpbWl0fWA7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiU2VuZGluZyBmZXRjaCByZXF1ZXN0XCIpO1xuICAgIGxldCByZXN1bHQgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGNvbnNvbGUubG9nKFwibG9hZGluZyBkYXRhXCIpO1xuICAgIGxldCB2YWx1ZSA9IGF3YWl0IHJlc3VsdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyBwcm9kdWN0c1wiLCBlcnJvcik7XG4gIH1cbn1cblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZFNpbmdsZVByb2R1Y3QocHJvZHVjdElkKSB7XG4gIGxldCB1cmwgPSBgaHR0cHM6Ly9mYWtlc3RvcmVhcGkuY29tL3Byb2R1Y3RzLyR7cHJvZHVjdElkfWA7XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlbmRpbmcgZmV0Y2ggcmVxdWVzdFwiKTtcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoIXJlc3VsdC5vaykgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHByb2JsZW0uICcpO1xuXG4gICAgY29uc29sZS5sb2coXCJsb2FkaW5nIGRhdGFcIik7XG4gICAgbGV0IHZhbHVlID0gYXdhaXQgcmVzdWx0Lmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJFcnJvciBsb2FkaW5nIHByb2R1Y3RzXCIsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUHJvZHVjdChwcm9kdWN0SWQpIHtcbiAgbGV0IHVybCA9IGBodHRwczovL2Zha2VzdG9yZWFwaS5jb20vcHJvZHVjdHMvJHtwcm9kdWN0SWR9YDtcblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGBTZW5kaW5nIGZldGNoIHJlcXVlc3QgZm9yIGRlbGV0aW5nIHByb2R1Y3Qke3Byb2R1Y3RJZH1gKTtcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZmV0Y2godXJsLCB7IG1ldGhvZDogJ0RFTEVURScgfSk7XG4gICAgaWYgKCFyZXN1bHQub2spIHRocm93IG5ldyBFcnJvcignTmV0d29yayBwcm9ibGVtJyk7XG5cbiAgICBsZXQgdmFsdWUgPSBhd2FpdCByZXN1bHQuanNvbigpO1xuXG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmRpcih2YWx1ZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLQo9C00LDQu9GP0LXQvNGL0Lkg0L/RgNC+0LTQutGD0YIg0LIg0LHQsNC30LUg0LTQsNC90L3Ri9GFINC+0YLRgdGD0YLRgdGC0LLRg9C10YJcIik7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlLmlkID09PSBwcm9kdWN0SWQpIHtcbiAgICAgIGFsZXJ0KGDQn9GA0L7QtNGD0LrRgjogL24gJHt2YWx1ZS50aXRsZX0gL24gL24g0KPRgdC/0LXRiNC90L4g0YPQtNCw0LvQtdC9YCk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ9Cg0LXQt9GD0LvRjNGC0LDRgiDRg9C00LDQu9C10L3QuNGPINC+0LHRitC10LrRgtCwOicpO1xuICAgIGNvbnNvbGUuZGlyKHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBhbGVydChcIkVycm9yIGRlbGV0aW5nIHByb2R1Y3QgXCIgKyBlcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFByb2R1Y3QocHJvZHVjdERhdGEpIHtcbiAgY29uc3QgdXJsID0gJ2h0dHBzOi8vZmFrZXN0b3JlYXBpLmNvbS9wcm9kdWN0cyc7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9kdWN0RGF0YSlcbiAgfTtcblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiU2VuZGluZyBmZXRjaCByZXF1ZXN0IGZvciBhZGRpbmcgbmV3IHByb2R1Y3RcIik7XG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IGZldGNoKHVybCwgb3B0aW9ucyk7XG4gICAgaWYgKCFyZXN1bHQub2spIHRocm93IG5ldyBFcnJvcihcIk5ldHdvcmsgZXJyb3JcIik7XG4gICAgY29uc29sZS5sb2coXCJMb2FkaW5nIHNlcnZlciByZXNwb25zZSBvZiBhZGRpbmcgbmV3IHByb2R1Y3RcIik7XG5cbiAgICBsZXQgdmFsdWUgPSBhd2FpdCByZXN1bHQuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2coXCJSZXN1bHQgb2YgYWRkaW5nIG5ldyBwcm9kdWN0XCIpO1xuICAgIGNvbnNvbGUuZGlyKHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygn0KDQtdC30YPQu9GM0YLQsNGCINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0LPQviDQvtCx0YrQtdC60YLQsCcpO1xuICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7Qs9C+INGC0L7QstCw0YDQsCAnLCBlcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSB7XG4gIGNvbnN0IHVybCA9ICdodHRwczovL2Zha2VzdG9yZWFwaS5jb20vcHJvZHVjdHMvY2F0ZWdvcmllcyc7XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlbmRpbmcgZmV0Y2ggcmVxdWVzdCBmb3IgbG9hZCBjYXRlZ29yaWVzXCIpO1xuICAgIGxldCByZXN1bHQgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGlmICghcmVzdWx0Lm9rKSB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcblxuICAgIGNvbnNvbGUubG9nKFwiTG9hZGluZyBjYXRlZ29yaWVzIG5hbWVzXCIpO1xuICAgIGxldCB2YWx1ZSA9IGF3YWl0IHJlc3VsdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyBjYXRlZ29yaWVzIFwiLCBlcnJvcik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJzaG93UHJvZHVjdENhcmQiLCJwcm9kdWN0RGF0YSIsInBhcmVudCIsInByb2R1Y3RDYXJkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiZGF0YXNldCIsInByb2R1Y3RJZCIsImlkIiwiaW5uZXJIVE1MIiwiaW1hZ2UiLCJ0aXRsZSIsImNhdGVnb3J5IiwicHJpY2UiLCJhcHBlbmRDaGlsZCIsInByb2R1Y3RMaXN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9kdWN0c0RhdGEiLCJjYXRlZ29yeUZpbHRlciIsImJ0bkxvYWRNb3JlIiwiYnRuRGVsZXRlUHJvZHVjdCIsImJ0bkFkZFByb2R1Y3QiLCJzYW1wbGVQcm9kdWN0RGF0YSIsImRlc2NyaXB0aW9uIiwiYXN5bmMiLCJ1cmwiLCJpc05hTiIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJmZXRjaCIsInZhbHVlIiwianNvbiIsImVycm9yIiwibG9hZFByb2R1Y3RzIiwidGhlbiIsInJlcyIsImZvckVhY2giLCJwdXNoIiwiY2F0Y2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJsZW5ndGgiLCJsb2FkQ291bnQiLCJNYXRoIiwibWluIiwicHJvZHVjdElkQXJyIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiXyIsImkiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsIm9rIiwiRXJyb3IiLCJsb2FkU2luZ2xlUHJvZHVjdCIsInJlc3VsdHMiLCJzdGF0dXMiLCJsb2FkTW9yZVByb2R1Y3RzIiwidGFyZ2V0Iiwic2V0QXR0cmlidXRlIiwibWV0aG9kIiwiZGlyIiwiYWxlcnQiLCJkZWxldGVQcm9kdWN0Iiwib3B0aW9ucyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkUHJvZHVjdCIsImNhdGVnb3J5U2VsZWN0IiwiZ2V0Q2F0ZWdvcmllcyIsInNlbGVjdERhdGEiLCJlbGVtIiwiY2F0ZWdvcmllcyIsInBhcmVudE5vZGUiLCJwcmVwZW5kIiwiZmlsdGVyQnkiLCJmaWx0ZXJlZFByb2R1Y3RzIiwiZmlsdGVyIiwicHJvZCIsImZpbHRlclByb2R1Y3RMaXN0Iiwic2hvd0NhdGVnb3J5U2VsZWN0Iiwic2V0Q2F0ZWdvcnlTZWxlY3QiXSwic291cmNlUm9vdCI6IiJ9